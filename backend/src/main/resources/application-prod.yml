# Production configuration optimizations - minimal memory footprint
cors:
  allowed:
    origins: ${CORS_ALLOWED_ORIGINS:https://osgiliath.vercel.app,https://osgiliath-*.vercel.app,http://localhost:3000}

spring:
  jpa:
    show-sql: false
    hibernate:
      ddl-auto: update  # Allow schema updates in prod for now
    properties:
      hibernate:
        format_sql: false
        cache:
          use_second_level_cache: false
        jdbc:
          batch_size: 10
          fetch_size: 20
    open-in-view: false
  datasource:
    hikari:
      maximum-pool-size: 3  # Minimal connection pool
      minimum-idle: 1
      connection-timeout: 30000
  main:
    lazy-initialization: true  # Lazy load beans to reduce startup memory

logging:
  level:
    root: WARN                           # Only warnings and errors
    com.osgiliath: INFO                   # Info level for application
    org.springframework.security: WARN    # Reduce security logging
    org.hibernate.SQL: WARN               # No SQL logging
    org.hibernate.type: WARN              # No parameter binding logging
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"  # Simpler log format

# Disable Swagger in production for security and performance
springdoc:
  swagger-ui:
    enabled: false
  api-docs:
    enabled: false
